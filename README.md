# testChat

## Описание проекта

**Добро пожаловать, дорогой читатель!** Этот проект создан исключительно ради забавы и не имеет каких-либо серьезных целей. Это, своего рода, проба пера абстракциониста.

Проект разработан с использованием **FastAPI** и представляет собой простой чат с использованием WebSocket, позволяющий всем пользователям общаться в одном общем канале.

---

## Основные возможности

- **Минималистичность**: Весь функционал проекта выполнен с упором на простоту.
- **Регистрация**: Доступна по адресу ['/auth/register'](#), требуется только логин и пароль.
- **Вход**: Доступен по адресу ['/auth/login'](#); отображается в Swagger.
- **Чат**: После успешного входа происходит редирект на страницу чата ['/chat'](#), где и ведется общение.

### Особенности

- **Redis**: Подключен к проекту ради демонстрации навыков; фактически используется для быстрой выдачи токенов (не для хранения сообщений).
- **Telegram-бот**: Проект включает Telegram-бота ['@UvedomlyatorMessagesbot'](#). Напишите ему команду '/start', когда проект запущен, и он запомнит ваш ID. С каждым новым сообщением бот дублирует его вам в Telegram (реализовано через события SQLAlchemy).
- **Celery**: Опциональная возможность для очистки старых токенов каждые 5 минут, оставляя 50 активных (для теста ограничено до 3).

---

## Запуск проекта

### Обычный запуск (FastAPI) *(не рекомендуется)*

1. Клонируйте проект и создайте виртуальное окружение:
   ```bash
   git clone https://github.com/BOPOH1243/testChat.git
   cd testChat
   python -m venv venv
   source venv/bin/activate
   pip install -r requirements.txt
   cd fapi
   ```

2. Настройте базу данных с помощью скрипта 'init_postgres.sh':
   ```bash
   sudo bash init_postgres.sh
   ```

3. Запустите проект:
   ```bash
   uvicorn app:app --reload
   ```

### Запуск через Docker-compose *(рекомендуется)*

Проект также можно запустить через **Docker Compose**. Он создаст три контейнера:

- **PostgreSQL** (БД)
- **Redis**
- **Приложение**

> Контейнеры используют дефолтные порты, поэтому они могут конфликтовать с аналогичными сервисами, запущенными на вашей системе.

Запуск через Docker Compose:
```bash
sudo docker-compose up --build
```

---
